{"version":3,"sources":["components/Filter.js","components/AddPerson.js","components/Person.js","components/Message.js","services/persons.js","App.js","index.js"],"names":["Filter","filter","handleNewFilter","value","onChange","AddPerson","name","number","handleNewName","handleNewNumber","addPerson","onSubmit","type","Person","person","handleDeletePerson","onClick","id","Message","message","className","dbUrl","axios","get","then","response","data","post","put","delete","App","useState","persons","setPersons","newName","setNewName","newNumber","setnewNumber","newFilter","setnewFilter","setMessage","useEffect","personsService","personToDelete","find","window","confirm","handleMessage","catch","err","setTimeout","peopleToShow","length","toLowerCase","includes","event","target","preventDefault","alert","personExist","existPerson","map","error","handleUpdatePerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.fdc0e93c.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = ({ filter, handleNewFilter }) => {\r\n  return (\r\n    <input value={filter} onChange={handleNewFilter} />\r\n  )\r\n}\r\n\r\nexport default Filter\r\n","import React from 'react'\r\n\r\nconst AddPerson = ({\r\n    name, \r\n    number, \r\n    handleNewName, \r\n    handleNewNumber, \r\n    addPerson\r\n  }) => {\r\n  return (\r\n      <form onSubmit={addPerson}>\r\n        <div>\r\n          name: <input value={name} onChange={handleNewName} />\r\n        </div>\r\n        <div>\r\n          number: <input value={number} onChange={handleNewNumber} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n  )\r\n}\r\n\r\nexport default AddPerson\r\n","import React from 'react'\r\n\r\nconst Person = ({ person, handleDeletePerson }) => {\r\n  return (\r\n    <div>\r\n      {person.name} {person.number} \r\n      <button onClick={() => handleDeletePerson(person.id)}>delete</button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Person\r\n","import React from 'react'\r\nconst Message = ({ message }) => {\r\n  if (message === null) return null\r\n  return (\r\n    <div className={message.type}>\r\n      <p>{message.message}</p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Message\r\n","import axios from \"axios\";\r\nconst dbUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(dbUrl);\r\n  return request.then((response) => response.data);\r\n};\r\nconst create = (person) => {\r\n  const request = axios.post(dbUrl, person);\r\n  return request.then((response) => response.data);\r\n};\r\nconst update = (id, person) => {\r\n  const request = axios.put(`${dbUrl}/${id}`, person);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst deletePerson = (id) => {\r\n  const request = axios.delete(`${dbUrl}/${id}`);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default { getAll, create, update, deletePerson };\r\n","import \"./index.css\"\r\n\r\nimport React, { useState, useEffect } from 'react'\r\n\r\nimport Filter from './components/Filter'\r\nimport AddPerson from './components/AddPerson'\r\nimport Person from './components/Person'\r\nimport Message from './components/Message'\r\n\r\nimport personsService from './services/persons'\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n  const [newName, setNewName] = useState('')\r\n  const [newNumber, setnewNumber] = useState('')\r\n  const [newFilter, setnewFilter] = useState('')\r\n  const [message, setMessage] = useState(null)\r\n\r\n\r\n  useEffect(() => {\r\n    personsService\r\n      .getAll()\r\n      .then((persons) => setPersons(persons))\r\n  }, [])\r\n\r\n  const handleNewName = (event) => setNewName(event.target.value)\r\n  const handleNewNumber = (event) => setnewNumber(event.target.value)\r\n  const handleNewFilter = (event) => setnewFilter(event.target.value)\r\n\r\n  const handleDeletePerson = (id) => {\r\n    const personToDelete = persons.find((person) => person.id === id)\r\n    const confirmToDelete = window.confirm(`Delete ${personToDelete.name}`)\r\n    if (!confirmToDelete) return\r\n\r\n    personsService\r\n      .deletePerson(id)\r\n      .then(() => {\r\n        setPersons(persons.filter((person) => person.id !== id))\r\n        handleMessage(`Deleted ${personToDelete.name}`)\r\n      })\r\n      .catch((err) => {\r\n        handleMessage(`${personToDelete.name} had already been removed`, 'error')\r\n      })\r\n  }\r\n\r\n  const handleUpdatePerson = (existPerson, number) => {\r\n    personsService\r\n      .update(existPerson.id, { ...existPerson, number })\r\n      .then((response) =>\r\n        setPersons(\r\n          persons.map(\r\n            (person) =>\r\n              existPerson.id === person.id\r\n                ? response\r\n                : person\r\n          )\r\n        )\r\n      )\r\n      .catch((error) => handleMessage(\"Some error occured\", \"error\"))\r\n  }\r\n\r\n  const handleMessage = (message, type = \"success\") => {\r\n    setMessage({ type, message })\r\n    setTimeout(() => {\r\n      setMessage(null)\r\n    }, 3000);\r\n  }\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n\r\n    const name = newName\r\n    const number = newNumber\r\n\r\n\r\n    if (!name || !number) {\r\n      alert(`Empty values not allowed`)\r\n      return null\r\n    }\r\n\r\n    const personExist = persons.find((person) => person.name === name)\r\n    if (personExist) {\r\n      const confirmChange = window.confirm(`${personExist.name} is already to phonebook, replace the old number with a new one?`)\r\n      if (confirmChange) {\r\n        handleUpdatePerson(personExist, number)\r\n        handleMessage(`Changed number of  ${personExist.name}`)\r\n        setNewName('')\r\n        setnewNumber('')\r\n      }\r\n      return\r\n    }\r\n\r\n    personsService\r\n      .create({ name, number })\r\n      .then((person) => {\r\n        setPersons([...persons, person])\r\n        handleMessage(`Added ${person.name}`)\r\n        setNewName('')\r\n        setnewNumber('')\r\n      })\r\n      .catch((error) => handleMessage(`${error.response.data.error} `, 'error'))\r\n  }\r\n\r\n  const peopleToShow = newFilter.length > 0\r\n    ? persons.filter(\r\n      (person) =>\r\n        person.name.toLowerCase().includes(newFilter)\r\n    )\r\n    : persons\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Message message={message} />\r\n      filter shown with\r\n      <Filter filter={newFilter} handleNewFilter={handleNewFilter} />\r\n      <h2>add a new</h2>\r\n      <AddPerson\r\n        name={newName}\r\n        number={newNumber}\r\n        handleNewName={handleNewName}\r\n        handleNewNumber={handleNewNumber}\r\n        addPerson={addPerson}\r\n      />\r\n      <h2>Numbers</h2>\r\n      {\r\n        peopleToShow.map((person) =>\r\n          <Person\r\n            key={person.id}\r\n            person={person}\r\n            handleDeletePerson={handleDeletePerson}\r\n          />\r\n        )\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default App","import ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}