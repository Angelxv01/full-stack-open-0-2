(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{23:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var r=t(17),c=t.n(r),a=t(18),u=t(8),o=t(3),i=(t(23),t(2)),s=t(0),d=function(e){var n=e.filter,t=e.handleNewFilter;return Object(s.jsx)("input",{value:n,onChange:t})},l=function(e){var n=e.name,t=e.number,r=e.handleNewName,c=e.handleNewNumber,a=e.addPerson;return Object(s.jsxs)("form",{onSubmit:a,children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:n,onChange:r})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{value:t,onChange:c})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},b=function(e){var n=e.person,t=e.handleDeletePerson;return Object(s.jsxs)("div",{children:[n.name," ",n.number,Object(s.jsx)("button",{onClick:function(){return t(n.id)},children:"delete"})]})},j=function(e){var n=e.message;return null===n?null:Object(s.jsx)("div",{className:n.type,children:Object(s.jsx)("p",{children:n.message})})},f=t(5),h=t.n(f),m="/api/persons",O=function(){return h.a.get(m).then((function(e){return e.data}))},p=function(e){return h.a.post(m,e).then((function(e){return e.data}))},v=function(e,n){return h.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},x=function(e){return h.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},w=function(){var e=Object(i.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],c=Object(i.useState)(""),f=Object(o.a)(c,2),h=f[0],m=f[1],w=Object(i.useState)(""),g=Object(o.a)(w,2),N=g[0],k=g[1],y=Object(i.useState)(""),S=Object(o.a)(y,2),C=S[0],D=S[1],P=Object(i.useState)(null),E=Object(o.a)(P,2),F=E[0],J=E[1];Object(i.useEffect)((function(){O().then((function(e){return r(e)}))}),[]);var A=function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name))&&x(e).then((function(){r(t.filter((function(n){return n.id!==e}))),B("Deleted ".concat(n.name))})).catch((function(e){B("".concat(n.name," had already been removed"),"error")}))},B=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";J({type:n,message:e}),setTimeout((function(){J(null)}),3e3)},I=C.length>0?t.filter((function(e){return e.name.toLowerCase().includes(C)})):t;return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(j,{message:F}),"filter shown with",Object(s.jsx)(d,{filter:C,handleNewFilter:function(e){return D(e.target.value)}}),Object(s.jsx)("h2",{children:"add a new"}),Object(s.jsx)(l,{name:h,number:N,handleNewName:function(e){return m(e.target.value)},handleNewNumber:function(e){return k(e.target.value)},addPerson:function(e){e.preventDefault();var n=h,c=N;if(!n||!c)return alert("Empty values not allowed"),null;var o=t.find((function(e){return e.name===n}));o?window.confirm("".concat(o.name," is already to phonebook, replace the old number with a new one?"))&&(!function(e,n){v(e.id,Object(u.a)(Object(u.a)({},e),{},{number:n})).then((function(n){return r(t.map((function(t){return e.id===t.id?n:t})))})).catch((function(e){return B("Some error occured","error")}))}(o,c),B("Changed number of  ".concat(o.name)),m(""),k("")):p({name:n,number:c}).then((function(e){r([].concat(Object(a.a)(t),[e])),B("Added ".concat(e.name)),m(""),k("")})).catch((function(e){return B("".concat(e.response.data.error," "),"error")}))}}),Object(s.jsx)("h2",{children:"Numbers"}),I.map((function(e){return Object(s.jsx)(b,{person:e,handleDeletePerson:A},e.id)}))]})};c.a.render(Object(s.jsx)(w,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.fdc0e93c.chunk.js.map